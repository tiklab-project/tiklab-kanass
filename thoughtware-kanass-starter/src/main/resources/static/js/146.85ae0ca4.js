(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{1823:function(e,a,t){"use strict";t.r(a);t(51);var r=t(18),n=(t(52),t(19)),c=(t(1003),t(1e3)),m=(t(759),t(84)),i=(t(85),t(26)),l=t(0),o=t.n(l),u=t(877),s=t(8),N=t(5),d=t(942);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f="/Users/yuanjiexuan/Desktop/bate/project-web/thoughtware-kanass-ui/src/home/common/components/DynamicList.js";function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(Object(t),!0).forEach((function(a){h(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function h(e,a,t){return(a=function(e){var a=function(e,a){if("object"!==b(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,a||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"===b(a)?a:String(a)}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function E(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,n,c,m,i=[],l=!0,o=!1;try{if(c=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=c.call(t)).done)&&(i.push(r.value),i.length!==a);l=!0);}catch(e){o=!0,n=e}finally{try{if(!l&&null!=t.return&&(m=t.return(),Object(m)!==m))return}finally{if(o)throw n}}return i}}(e,a)||g(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,a){if(e){if("string"==typeof e)return j(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,a):void 0}}function j(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}a.default=Object(s.inject)("homeStore")(Object(s.observer)((function(e){var a,t=e.homeStore,s=t.findLogpage,b=t.opLogCondition,_=t.opLogList,h=t.opLogTotal,g=t.setOpLogList,j=t.findProjectSetProjectList,w=(Object(N.getUser)().userId,E(Object(l.useState)(),2)),k=w[0],S=w[1],O=E(Object(l.useState)(),2),P=O[0],I=O[1],A=e.match.params.version,T=e.match.params.sprint,D=e.match.params.id,x=null===(a=e.match)||void 0===a?void 0:a.path;Object(l.useEffect)((function(){L();var a={status:1,pageParam:{pageSize:20,currentPage:1},data:null};if("/projectDetail/:id/dynamic"===e.route.path){I("项目概况");var t=e.match.params.id;s(v(v({},a),{},{data:{projectId:t}}))}if("/projectSetdetail/:projectSetId/dynamic"===e.route.path){I("项目集概况");var r=e.match.params.projectSetId;g([]),j({projectSetId:r}).then((function(e){if(0===e.code){var a=e.data;if(a.length>0){var t=[];a.map((function(e){s({data:{projectId:e.id}},"projectSet").then((function(e){0===e.code&&(t.push.apply(t,y(e.data.dataList)),g([].concat(t)))}))}))}else g([])}}))}"/:id/sprintdetail/:sprint/dynamic"===e.route.path&&(s(v(v({},a),{},{data:{sprintId:T,projectId:D}})),I("迭代概况")),"/:id/versiondetail/:version/dynamic"===e.route.path&&(s(v(v({},a),{},{data:{versionId:A,projectId:D}})),I("版本概况"))}),[]);var L=function(){if("/projectSetdetail/:projectSetId/dynamic"===x){var a=e.match.params.projectSetId;j({projectSetId:a}).then((function(e){0===e.code&&S(e.data)}))}};return o.a.createElement(r.default,{style:{height:"100%",overflow:"auto",background:"var(--thoughtware-gray-600)"},__source:{fileName:f,lineNumber:111,columnNumber:13}},o.a.createElement(n.default,{sm:24,md:24,lg:{span:24},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"},className:"dynamic-col",__source:{fileName:f,lineNumber:112,columnNumber:9}},o.a.createElement("div",{className:"dynamic-list-page",__source:{fileName:f,lineNumber:113,columnNumber:13}},o.a.createElement("div",{className:"dynamic-list-top",__source:{fileName:f,lineNumber:114,columnNumber:17}},o.a.createElement(u.a,p({},e,{firstText:P,secondText:"最新动态",__source:{fileName:f,lineNumber:115,columnNumber:21}})),"/projectSetdetail/:projectSetId/dynamic"===x&&o.a.createElement("div",{className:"dynamic-filter",__source:{fileName:f,lineNumber:122,columnNumber:25}},o.a.createElement(i.default,{placeholder:"项目",allowClear:!0,className:"dynamic-select",key:"selectProject2",onSelect:function(e){s({data:{projectId:e}})},style:{width:300},__source:{fileName:f,lineNumber:124,columnNumber:29}},k&&k.map((function(e){return o.a.createElement(i.default.Option,{value:e.id,key:e.id,__source:{fileName:f,lineNumber:134,columnNumber:48}},e.projectName)}))))),o.a.createElement("div",{className:"dynamic-list",__source:{fileName:f,lineNumber:142,columnNumber:17}},_&&_.length>0?_.map((function(a){return o.a.createElement(d.a,p({content:a.data,type:a.actionType.id},e,{__source:{fileName:f,lineNumber:145,columnNumber:36}}))})):o.a.createElement(m.default,{image:"/images/nodata.png",description:"暂时没有动态~",__source:{fileName:f,lineNumber:148,columnNumber:29}})),_&&_.length>0&&o.a.createElement("div",{className:"dynamic-pagination",__source:{fileName:f,lineNumber:152,columnNumber:58}},o.a.createElement(c.a,{onChange:function(e,a){s({pageParam:{pageSize:20,currentPage:e}})},defaultCurrent:1,total:h,current:b.pageParam.currentPage,showSizeChanger:!1,defaultPageSize:20,pageSize:20,__source:{fileName:f,lineNumber:153,columnNumber:25}})))))})))},877:function(e,a,t){"use strict";var r=t(0),n=t.n(r),c=t(21),m="/Users/yuanjiexuan/Desktop/bate/project-web/thoughtware-kanass-ui/src/common/breadcrumb/Breadcrumb.js";a.a=Object(c.g)((function(e){e.homeImage;var a=e.firstText,t=e.secondText,r=e.firstUrl,c=e.children;return n.a.createElement("div",{className:"page-head",__source:{fileName:m,lineNumber:16,columnNumber:9}},n.a.createElement("div",{className:"page-breadcrumb",__source:{fileName:m,lineNumber:17,columnNumber:13}},t&&n.a.createElement("svg",{className:"svg-icon page-back","aria-hidden":"true",onClick:function(){r?e.history.push(r):e.history.goBack()},__source:{fileName:m,lineNumber:20,columnNumber:21}},n.a.createElement("use",{xlinkHref:"#icon-pageLeft",__source:{fileName:m,lineNumber:21,columnNumber:25}})),n.a.createElement("span",{className:"".concat(t?"page-link":""),__source:{fileName:m,lineNumber:24,columnNumber:17}},a),t&&n.a.createElement(n.a.Fragment,null,"   /   ",n.a.createElement("span",{__source:{fileName:m,lineNumber:26,columnNumber:54}},t))),c)}))},942:function(e,a,t){"use strict";var r=t(0),n=t.n(r),c=t(21),m="/Users/yuanjiexuan/Desktop/bate/project-web/thoughtware-kanass-ui/src/common/overviewComponent/DynamicItem.js";a.a=Object(c.g)((function(e){var a=e.content,t=(e.model,e.type),r=e.key,c=JSON.parse(a),i=c.createUserIcon,l=c.master,o=c.workItemTitle,u=c.receiveTime,s=c.createTime,N=c.workItemId,d=c.projectId,b=c.oldValue,f=c.newValue,p=c.projectName,y=e.match.params.sprint?e.match.params.sprint:null,_=e.match.params.version?e.match.params.version:null,v=e.match.path,h=function(){v.indexOf("sprintdetail")>-1&&e.history.push("/".concat(d,"/sprintdetail/").concat(y,"/work/").concat(N)),v.indexOf("home")>-1&&e.history.push("/projectDetail/".concat(d,"/work/").concat(N)),v.indexOf("projectDetail")>-1&&e.history.push("/projectDetail/".concat(d,"/work/").concat(N)),v.indexOf("versiondetail")>-1&&e.history.push("/".concat(d,"/versiondetail/").concat(_,"/work/").concat(N)),v.indexOf("projectSetdetail")>-1&&e.history.push("/projectDetail/".concat(d,"/work/").concat(N))};return n.a.createElement(n.a.Fragment,null,function(){var e=null;switch(t){case"KANASS_LOGTYPE_PROJECTADD":e=n.a.createElement("div",{className:"dynamic-list-item",key:r,__source:{fileName:m,lineNumber:48,columnNumber:21}},n.a.createElement("div",{className:"dynamic-list-item-left",__source:{fileName:m,lineNumber:49,columnNumber:25}},n.a.createElement("div",{className:"dynamic-user-icon",__source:{fileName:m,lineNumber:50,columnNumber:29}},i),n.a.createElement("div",{className:"dynamic-content",__source:{fileName:m,lineNumber:51,columnNumber:29}},n.a.createElement("div",{className:"dynamic-work-action",__source:{fileName:m,lineNumber:52,columnNumber:33}},l,"添加了项目"),n.a.createElement("div",{className:"dynamic-work-item",__source:{fileName:m,lineNumber:53,columnNumber:33}},n.a.createElement("div",{className:"dynamic-work-title",onClick:function(){return h()},__source:{fileName:m,lineNumber:54,columnNumber:37}},p)))),n.a.createElement("div",{__source:{fileName:m,lineNumber:58,columnNumber:25}},s," "));break;case"KANASS_LOGTYPE_WORKITEMADD":e=n.a.createElement("div",{className:"dynamic-list-item",key:r,__source:{fileName:m,lineNumber:64,columnNumber:21}},n.a.createElement("div",{className:"dynamic-list-item-left",__source:{fileName:m,lineNumber:65,columnNumber:25}},n.a.createElement("div",{className:"dynamic-user-icon",__source:{fileName:m,lineNumber:66,columnNumber:29}},i),n.a.createElement("div",{className:"dynamic-content",__source:{fileName:m,lineNumber:67,columnNumber:29}},n.a.createElement("div",{className:"dynamic-work-action",__source:{fileName:m,lineNumber:68,columnNumber:33}},l,"添加了事项"),n.a.createElement("div",{className:"dynamic-work-item",__source:{fileName:m,lineNumber:69,columnNumber:33}},n.a.createElement("div",{className:"dynamic-work-title",onClick:function(){return h()},__source:{fileName:m,lineNumber:70,columnNumber:37}},o)))),n.a.createElement("div",{__source:{fileName:m,lineNumber:74,columnNumber:25}},s," "));break;case"KANASS_LOGTYPE_WORKUPDATESTATUS":e=n.a.createElement("div",{className:"dynamic-list-item",key:r,__source:{fileName:m,lineNumber:80,columnNumber:21}},n.a.createElement("div",{className:"dynamic-list-item-left",__source:{fileName:m,lineNumber:81,columnNumber:25}},n.a.createElement("div",{className:"dynamic-user-icon",__source:{fileName:m,lineNumber:82,columnNumber:29}},i),n.a.createElement("div",{className:"dynamic-content",__source:{fileName:m,lineNumber:83,columnNumber:29}},n.a.createElement("div",{className:"dynamic-work-action",__source:{fileName:m,lineNumber:84,columnNumber:33}},l.nickname,"修改了事项状态"),n.a.createElement("div",{className:"dynamic-work-item",__source:{fileName:m,lineNumber:85,columnNumber:33}},n.a.createElement("div",{className:"dynamic-work-title",onClick:function(){return h()},__source:{fileName:m,lineNumber:86,columnNumber:37}},o),n.a.createElement("div",{className:"dynamic-work-oldvalue",__source:{fileName:m,lineNumber:87,columnNumber:37}},b.name),"———",n.a.createElement("div",{className:"dynamic-work-newValue",__source:{fileName:m,lineNumber:93,columnNumber:37}},f.name)))),n.a.createElement("div",{className:"dynamic-time",__source:{fileName:m,lineNumber:101,columnNumber:25}},u," "));break;case"KANASS_LOGTYPE_WORKUPDATEMASTER":e=n.a.createElement("div",{className:"dynamic-list-item",key:r,__source:{fileName:m,lineNumber:107,columnNumber:21}},n.a.createElement("div",{className:"dynamic-list-item-left",__source:{fileName:m,lineNumber:108,columnNumber:25}},n.a.createElement("div",{className:"dynamic-user-icon",__source:{fileName:m,lineNumber:109,columnNumber:29}},i),n.a.createElement("div",{className:"dynamic-content",__source:{fileName:m,lineNumber:110,columnNumber:29}},n.a.createElement("div",{className:"dynamic-work-action",__source:{fileName:m,lineNumber:111,columnNumber:33}},l.nickname,"修改了事项负责人"),n.a.createElement("div",{className:"dynamic-work-item",__source:{fileName:m,lineNumber:112,columnNumber:33}},n.a.createElement("div",{className:"dynamic-work-title",onClick:function(){return h()},__source:{fileName:m,lineNumber:113,columnNumber:37}},o),n.a.createElement("div",{className:"dynamic-work-oldvalue",__source:{fileName:m,lineNumber:114,columnNumber:37}},b.nickname),"———",n.a.createElement("div",{className:"dynamic-work-newValue",__source:{fileName:m,lineNumber:120,columnNumber:37}},f.nickname)))),n.a.createElement("div",{className:"dynamic-time",__source:{fileName:m,lineNumber:128,columnNumber:25}},u," "))}return e}())}))}}]);